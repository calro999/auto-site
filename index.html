<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GAL-INTEL | ä¸–ã®ä¸­ã®ã€Œä»Šã€ã‚’ã€æœ€é€Ÿã§ãƒã‚¤ãƒ–ã‚¹å¤‰æ›ã€‚</title>
    
    <meta name="description" content="æœ€æ–°ãƒ‹ãƒ¥ãƒ¼ã‚¹ã‚’æœ€é€Ÿãƒã‚¤ãƒ–ã‚¹å¤‰æ›ã€‚AIæ¤œç´¢ã‚¨ãƒ³ã‚¸ãƒ³(Perplexity/SearchGPT)ã«ç‰¹åŒ–ã—ãŸã€ä¸–ç•Œä¸€é€Ÿã„ãƒˆãƒ¬ãƒ³ãƒ‰è¦ç´„ã‚µã‚¤ãƒˆã€‚">
    <meta name="keywords" content="ã‚®ãƒ£ãƒ«èª, ãƒ‹ãƒ¥ãƒ¼ã‚¹è¦ç´„, ãƒˆãƒ¬ãƒ³ãƒ‰, AIæ¤œç´¢, ãƒã‚¤ãƒ–ã‚¹">
    <meta property="og:title" content="GAL-INTEL | ä»Šã®ãƒˆãƒ¬ãƒ³ãƒ‰ã‚’ãƒã‚¤ãƒ–ã‚¹ãƒã‚§ãƒƒã‚¯">
    <meta property="og:description" content="ä»Šã®çˆ†ã‚¢ãƒ„è©±é¡Œã‚’æœ€é€Ÿãƒã‚§ãƒƒã‚¯ï¼">
    <meta property="og:image" content="https://raw.githubusercontent.com/calro999/auto-site/main/ogp-banner.png">
    <meta name="twitter:card" content="summary_large_image">

    <style>
        :root { 
            --bg: #F8F9FA; 
            --text: #1A202C; 
            --accent-pink: #FF0080; 
            --accent-blue: #7928CA; 
            --card-bg: #FFFFFF; 
            --border: #E2E8F0;
            --glass: rgba(255, 255, 255, 0.9);
        }

        * { box-sizing: border-box; }
        body { 
            background: var(--bg); color: var(--text); 
            font-family: 'Helvetica Neue', Arial, 'Hiragino Sans', sans-serif; 
            margin: 0; padding: 0; overflow-x: hidden; line-height: 1.6;
        }

        #connect-bg { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; opacity: 0.8; }

        .layout { 
            display: grid; grid-template-columns: 260px 1fr 260px; gap: 30px; 
            max-width: 1450px; margin: 0 auto; padding: 20px;
        }

        .sidebar { position: sticky; top: 20px; height: calc(100vh - 40px); display: flex; flex-direction: column; gap: 20px; }
        .scroll-area { flex-grow: 1; overflow-y: auto; padding-right: 8px; display: flex; flex-direction: column; gap: 20px; }
        
        .glass-box { 
            background: var(--glass); backdrop-filter: blur(10px); border-radius: 20px; 
            padding: 20px; border: 1px solid var(--border); box-shadow: 0 4px 20px rgba(0,0,0,0.03); 
        }

        .box-title { 
            font-size: 0.7rem; font-weight: 900; color: #718096; text-transform: uppercase; 
            margin-bottom: 12px; letter-spacing: 1.5px; display: flex; align-items: center; gap: 8px;
        }

        header { text-align: center; margin-bottom: 25px; }
        .hero-title { 
            font-size: 3.2rem; font-weight: 900; margin: 0; letter-spacing: -2px; 
            background: linear-gradient(to right, var(--accent-pink), var(--accent-blue));
            -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent;
        }
        .hero-title a { text-decoration: none; color: inherit; }

        .main-feed { display: flex; flex-direction: column; gap: 20px; }

        /* v2: ã‚«ãƒ¼ãƒ‰åè»¢ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ */
        .trend-card-container { perspective: 1000px; height: 450px; }
        .trend-card-inner { 
            position: relative; width: 100%; height: 100%; text-align: center; 
            transition: transform 0.8s cubic-bezier(0.4, 0, 0.2, 1); transform-style: preserve-3d; 
        }
        .trend-card-container.flipped .trend-card-inner { transform: rotateY(180deg); }

        .trend-card-front, .trend-card-back { 
            position: absolute; width: 100%; height: 100%; backface-visibility: hidden; 
            background: var(--card-bg); border-radius: 30px; padding: 35px; 
            border: 1px solid var(--border); box-shadow: 0 10px 30px rgba(0,0,0,0.02);
            display: flex; flex-direction: column; align-items: center; justify-content: center;
        }

        .trend-card-back { transform: rotateY(180deg); background: #fdfdfd; }

        .vibes-memo { 
            background: #F7FAFC; border-left: 6px solid var(--accent-pink);
            padding: 15px 20px; border-radius: 12px; font-size: 1rem;
            font-weight: 800; margin-bottom: 15px; font-style: italic; color: #2D3748;
        }

        /* ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãƒ»ã‚¤ã‚³ãƒ©ã‚¤ã‚¶ãƒ¼ */
        .eq-container { display: flex; gap: 4px; height: 35px; align-items: flex-end; margin-bottom: 15px; cursor: pointer; }
        .eq-bar { width: 5px; background: linear-gradient(to top, var(--accent-blue), var(--accent-pink)); border-radius: 4px; transition: height 0.1s; }
        .eq-active { animation: eq-pulse 0.7s ease-in-out infinite alternate; }

        .btn-group { display: flex; gap: 8px; margin-top: 15px; }
        .btn { 
            padding: 10px 18px; border-radius: 12px; text-decoration: none; 
            font-weight: 900; font-size: 0.8rem; transition: 0.3s; 
            display: inline-flex; align-items: center; gap: 5px;
        }
        .btn-analyze { background: var(--text); color: #fff; }
        .btn-flip { background: var(--accent-blue); color: #fff; cursor: pointer; }

        /* è£é¢ã®ãƒ‡ã‚¶ã‚¤ãƒ³ */
        .ai-image-thumb { width: 120px; height: 120px; border-radius: 15px; background: #eee; margin-bottom: 15px; object-fit: cover; }
        .past-context { font-size: 0.85rem; color: #718096; text-align: left; width: 100%; }

        .tag-list, .word-ranking { display: flex; flex-wrap: wrap; gap: 6px; }
        .tag-item, .rank-item { font-size: 0.7rem; background: #EDF2F7; padding: 5px 10px; border-radius: 8px; color: #4A5568; text-decoration: none; font-weight: bold; }
        
        /* v2: ç”¨èªé›†ï¼ˆDictionaryï¼‰ */
        .dict-item { font-size: 0.75rem; border-bottom: 1px solid #edf2f7; padding: 8px 0; }
        .dict-word { color: var(--accent-pink); font-weight: 900; }

        .mobile-nav-btn {
            display: none; position: fixed; bottom: 25px; left: 50%; transform: translateX(-50%);
            background: linear-gradient(45deg, var(--accent-pink), var(--accent-blue)); color: white; 
            padding: 20px 0; width: 88%; border-radius: 100px; z-index: 1000; text-align: center; font-weight: 900; text-decoration: none;
        }

        @media (max-width: 1000px) { 
            .layout { grid-template-columns: 1fr; } 
            .sidebar:last-child { display: none; }
            .mobile-nav-btn { display: block; }
        }
        @keyframes eq-pulse { from { height: 15%; } to { height: 100%; } }
        #loading { position: fixed; inset: 0; background: #fff; display: flex; align-items: center; justify-content: center; font-weight: 900; color: var(--accent-pink); z-index: 2000; }
    </style>
</head>
<body>
    <canvas id="connect-bg"></canvas>
    <div id="loading">VIBE v2 CONNECTING...</div>

    <a href="#archive-section" class="mobile-nav-btn">ğŸ“… éå»è¨˜äº‹ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–</a>

    <div class="layout">
        <aside class="sidebar">
            <div class="scroll-area">
                <div class="glass-box">
                    <div class="box-title"><span>ğŸ”¥</span> HOT_WORDS</div>
                    <div id="word-ranking" class="word-ranking"></div>
                </div>
                <div class="glass-box">
                    <div class="box-title"><span>ğŸ“–</span> VIBES_DICT</div>
                    <div id="vibes-dict"></div>
                </div>
                <div class="glass-box" id="archive-section">
                    <div class="box-title"><span>ğŸ“…</span> ARCHIVES</div>
                    <div id="archive-list"></div>
                </div>
            </div>
        </aside>

        <main>
            <header>
                <h1 class="hero-title"><a id="nav-logo" href="/">GAL-INTEL</a></h1>
                <div style="font-size:0.7rem; font-weight:900; color:var(--accent-blue); letter-spacing:2px;">AI-SEARCH OPTIMIZED v2</div>
            </header>
            <div class="main-feed" id="trend-list"></div>
        </main>

        <aside class="sidebar">
            <div class="scroll-area">
                <div class="glass-box">
                    <div class="box-title"><span>ğŸ”„</span> SYNC</div>
                    <div id="sync-info" style="font-size: 0.7rem; font-weight: 900;"></div>
                </div>
                <div class="glass-box" style="flex-grow: 1;">
                    <div class="box-title"><span>ğŸ’€</span> THE_GRAVEYARD</div>
                    <div id="grave-list"></div>
                </div>
            </div>
        </aside>
    </div>

    <div id="ai-hidden-summary" aria-hidden="true" style="position:absolute; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0,0,0,0); border:0;"></div>

    <script>
        const canvas = document.getElementById('connect-bg');
        const ctx = canvas.getContext('2d');
        const DB_URL = 'https://raw.githubusercontent.com/calro999/auto-site/main/intelligence_db.json';

        function initBg(tags) {
            canvas.width = window.innerWidth; canvas.height = window.innerHeight;
            dots = (tags || []).map(t => ({
                x: Math.random() * canvas.width, y: Math.random() * canvas.height, 
                text: '#' + t, vx: (Math.random() - 0.5) * 0.4, vy: (Math.random() - 0.5) * 0.4, size: 14
            }));
            animate();
        }

        function animate() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            dots.forEach((d, i) => {
                d.x += d.vx; d.y += d.vy;
                if (d.x < 0 || d.x > canvas.width) d.vx *= -1; 
                if (d.y < 0 || d.y > canvas.height) d.vy *= -1;
                ctx.font = `bold ${d.size}px Arial`; ctx.fillStyle = 'rgba(121, 40, 202, 0.45)';
                ctx.fillText(d.text, d.x, d.y);
            });
            requestAnimationFrame(animate);
        }

        async function load() {
            try {
                const res = await fetch(DB_URL + '?t=' + Date.now());
                const db = await res.json();
                document.getElementById('loading').style.display = 'none';
                document.getElementById('sync-info').innerText = db.lastUpdate;
                initBg(db.tags);

                // ãƒ¯ãƒ¼ãƒ‰ãƒ©ãƒ³ã‚­ãƒ³ã‚° & ç”¨èªé›†
                document.getElementById('word-ranking').innerHTML = (db.tags || []).map(t => `<span class="rank-item">${t}</span>`).join('');
                document.getElementById('vibes-dict').innerHTML = (db.dictionary || []).map(d => `<div class="dict-item"><span class="dict-word">${d.word}</span>: ${d.mean}</div>`).join('');

                // ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–
                document.getElementById('archive-list').innerHTML = (db.archiveList || []).map(d => `<a href="./archive/${d}.html" class="grave-item">ğŸ“„ ${d}</a>`).join('');

                // ãƒ¡ã‚¤ãƒ³ãƒ•ã‚£ãƒ¼ãƒ‰
                document.getElementById('trend-list').innerHTML = (db.current || []).map((t, idx) => {
                    const eqBars = Array.from({length: 8}, (_, i) => `<div class="eq-bar eq-active" style="height: ${20+Math.random()*80}%; animation-delay: ${i*0.1}s"></div>`).join('');
                    return `
                        <div class="trend-card-container" id="card-${idx}">
                            <div class="trend-card-inner">
                                <div class="trend-card-front">
                                    <div class="vibes-memo">â€œ ${t.memo} â€</div>
                                    <div class="eq-container">${eqBars}</div>
                                    <h3>${t.title}</h3>
                                    <p class="desc">${t.desc}</p>
                                    <div class="btn-group">
                                        <a href="https://www.google.com/search?q=${encodeURIComponent(t.title)}" target="_blank" class="btn btn-analyze">ğŸ”— è©³ç´°</a>
                                        <div class="btn btn-flip" onclick="document.getElementById('card-${idx}').classList.toggle('flipped')">ğŸ”„ è£é¢ã‚’ãƒã‚§ãƒƒã‚¯</div>
                                    </div>
                                </div>
                                <div class="trend-card-back">
                                    <img src="${t.aiImage || ''}" class="ai-image-thumb" alt="Vibes Image">
                                    <div class="past-context">
                                        <strong>ğŸ“œ éå»ã®çµŒç·¯ / æ–‡è„ˆ:</strong><br>
                                        ${t.context || 'ã“ã®è©±é¡Œã®è©³ç´°ã¯å°‚ç”¨ãƒšãƒ¼ã‚¸ã§ãƒã‚§ãƒƒã‚¯ï¼'}
                                    </div>
                                    <div class="btn-group">
                                        <a href="./archive/${t.slug || ''}.html" class="btn btn-analyze">ğŸ“– ç‰¹è¨­ã¾ã¨ã‚ãƒšãƒ¼ã‚¸ã¸</a>
                                        <div class="btn btn-flip" onclick="document.getElementById('card-${idx}').classList.toggle('flipped')">ğŸ”™ æˆ»ã‚‹</div>
                                    </div>
                                </div>
                            </div>
                        </div>`;
                }).join('');

                // AIå‘ã‘éš ã—è¦ç´„ã®æµã—è¾¼ã¿
                document.getElementById('ai-hidden-summary').innerText = (db.current || []).map(t => `${t.title}: ${t.aiSummary}`).join(' ');

            } catch (e) { console.error(e); }
        }
        load();
    </script>
</body>
</html>